webpackJsonp([41],{272:function(e,t,i){var a=i(14)(i(738),i(824),null,null);e.exports=a.exports},697:function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteComboList=t.GetComboSetList=t.TemplateComboAdd=t.DeviceComboAdd=t.DeviceComboDelete=t.GetDeviceComboList=t.templateAdd=t.templateEdit=t.getTemplateDetail=t.templateRemove=t.templateRemoves=t.getDeviceComboList=t.PostAddressList=t.GetAddressList=t.updateDeviceAddress=t.DeleteAddressList=t.AddAddressData=t.RemoveBindDevice=t.updateDeviceTtemplate=t.getTemplateList=t.ChangeDevideStatus=t.AddDevice=t.EditDevice=t.lockDevice=t.PointsDevice=t.getDeviceDetail=t.GetDeviceList=void 0;var n=i(151),s=a(n),d=i(75),o=(a(d),i(98)),r=(a(o),i(152)),c=a(r),l=i(153),u=(a(l),i(97)),p=(a(u),function(e){var t="";for(var i in e)t+=i+"="+e[i]+"&";return"?"+t.substr(0,t.length-1)});t.GetDeviceList=function(e,t){return s.default.Get(c.default.device.list+p(e),t)},t.getDeviceDetail=function(e,t){return s.default.Get(c.default.device.details+p(e),t)},t.PointsDevice=function(e){return s.default.Post(c.default.device.topSplit,{device_id:e.device_id,device_sn:e.device_sn,coin_num:e.coin_num})},t.lockDevice=function(e){return s.default.Post(c.default.device.lockDevice,{device_id:e.device_id})},t.EditDevice=function(e){return s.default.Post(c.default.device.edit,e)},t.AddDevice=function(e){return s.default.Post(c.default.device.join,e)},t.ChangeDevideStatus=function(e){return s.default.Post(c.default.device.deviceStatus,{device_id:e.device_id,status:e.status})},t.getTemplateList=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return s.default.Post(c.default.device.templateList,e,t)},t.updateDeviceTtemplate=function(e){return s.default.Post(c.default.device.updateDeviceTtemplate,{ids:e.ids,device:e.device,toall:e.toall})},t.RemoveBindDevice=function(e){return s.default.Post(c.default.device.removeBind,{device_id:params.device_id})},t.AddAddressData=function(e){return s.default.Get(c.default.device.add+p(e))},t.DeleteAddressList=function(e){return s.default.Post(c.default.personal.del,{aId:e.aId})},t.updateDeviceAddress=function(e){return s.default.Post(c.default.personal.updateDeveceAddress,{id:e.id,province:e.province,city:e.city,county:e.county,addressType:e.addressType,latitude:e.latitude,longitude:e.longitude,address:e.address})},t.GetAddressList=function(e){var t="";for(var i in e)t+=i+"="+e[i]+"&";return s.default.Get(c.default.personal.list+"?"+t.substr(0,t.length-1))},t.PostAddressList=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return s.default.Post(c.default.personal.list,e,t)},t.getDeviceComboList=function(e,t){return s.default.Post(c.default.device.getTemplateFile,e,t)},t.templateRemoves=function(e){return s.default.Post(c.default.device.templateRemoves,{ids:e.ids})},t.templateRemove=function(e){return s.default.Post(c.default.device.templateRemove,{ids:e.ids})},t.getTemplateDetail=function(e,t){return s.default.Get(c.default.device.getTemplateDetail+p(e),t)},t.templateEdit=function(e){return s.default.Post(c.default.device.templateEdit,{name:e.name,id:e.id?e.id:"",default_pay:e.default_pay,alias:e.alias,address_id:e.address_id,combo_type:e.combo_type})},t.templateAdd=function(e){return s.default.Post(c.default.device.templateAdd,{name:e.name,id:e.id?e.id:"",default_pay:e.default_pay,alias:e.alias,address_id:e.address_id,combo_type:e.combo_type})},t.GetDeviceComboList=function(e){return s.default.Post(c.default.device.combo,{device_id:e.device_id})},t.DeviceComboDelete=function(e){return s.default.Post(c.default.device.deviceOneDelete,{id:e.id})},t.DeviceComboAdd=function(e){return s.default.Post(c.default.device.deviceOneAdd,{title:e.title,money:e.money,pulse:e.pulse,id:e.id})},t.TemplateComboAdd=function(e){return s.default.Post(c.default.device.templateComboAdd,{title:e.title,money:e.money,pulse:e.pulse,id:e.id})},t.GetComboSetList=function(e){return s.default.Post(c.default.device.getComboSetList,e)},t.DeleteComboList=function(e){return s.default.Post(c.default.device.deleteComboList,e)}},738:function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,i){function a(n,s){try{var d=t[n](s),o=d.value}catch(e){return void i(e)}if(!d.done)return Promise.resolve(o).then(function(e){a("next",e)},function(e){a("throw",e)});e(o)}return a("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var s=i(697),d=i(152),o=a(d),r=i(151),c=a(r);t.default={data:function(){return{postData:{page_number:1,per_page:10},per_page_code:10,count:0,deviceList:[],multipleSelection:[]}},methods:{batchDeleteList:function(e){var t=this,i="",a=!0,d=!1,o=void 0;try{for(var r,c=this.multipleSelection[Symbol.iterator]();!(a=(r=c.next()).done);a=!0){var l=r.value;i+=l.id+","}}catch(e){d=!0,o=e}finally{try{!a&&c.return&&c.return()}finally{if(d)throw o}}this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(n(regeneratorRuntime.mark(function e(){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.templateRemoves)({ids:i});case 2:a=e.sent,t.$notify({title:"温馨提示",message:"删除成功",type:"success"}),setTimeout(function(){window.location.reload()},1e3);case 5:case"end":return e.stop()}},e,t)}))).catch(function(){t.$notify({title:"温馨提示",message:"已取消删除",type:"info"})})},deleteList:function(e,t,i){var a=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(n(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.templateRemove)({ids:i.row.id});case 2:t=e.sent,a.$notify({title:"温馨提示",message:"删除成功",type:"success"}),setTimeout(function(){window.location.reload()},1e3);case 5:case"end":return e.stop()}},e,a)}))).catch(function(){a.$notify({title:"温馨提示",message:"已取消删除",type:"info"})})},handleSelectionChange:function(e){this.multipleSelection=e},handleCurrentChange:function(e){this.currentPage=e,this.postData.page_number=e,this.getData()},getData:function(){var e=this;return n(regeneratorRuntime.mark(function t(){var i,a,n,d,r,l,u,p,f,v,m,h,_,b,D,g;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.default.Post(o.default.device.templateList,"");case 2:return i=t.sent,t.next=5,(0,s.PostAddressList)();case 5:for(a=t.sent,n=new Map,n.set("coin","投币器/计时板"),n.set("coinV2","投币器二代"),n.set("power_bank","计时板二代"),d=!0,r=!1,l=void 0,t.prev=13,u=a.data[Symbol.iterator]();!(d=(p=u.next()).done);d=!0)f=p.value,n.set(f.id,f.address);t.next=21;break;case 17:t.prev=17,t.t0=t.catch(13),r=!0,l=t.t0;case 21:t.prev=21,t.prev=22,!d&&u.return&&u.return();case 24:if(t.prev=24,!r){t.next=27;break}throw l;case 27:return t.finish(24);case 28:return t.finish(21);case 29:for(v=!0,m=!1,h=void 0,t.prev=32,_=i.data[Symbol.iterator]();!(v=(b=_.next()).done);v=!0)D=b.value,D.address_id=n.get(D.address_id),D.combo_type=1==D.combo_type?"常规":"六宫格";t.next=40;break;case 36:t.prev=36,t.t1=t.catch(32),m=!0,h=t.t1;case 40:t.prev=40,t.prev=41,!v&&_.return&&_.return();case 43:if(t.prev=43,!m){t.next=46;break}throw h;case 46:return t.finish(43);case 47:return t.finish(40);case 48:for(e.count=i.count,e.deviceList=i.data,g=0;g<e.deviceList.length;g++)e.deviceList[g].default_pay=(parseInt(e.deviceList[g].default_pay)/100).toFixed(2);e.per_page_code=parseInt(e.postData.per_page);case 52:case"end":return t.stop()}},t,e,[[13,17,21,29],[22,,24,28],[32,36,40,48],[41,,43,47]])}))()},changePageNum:function(){this.postData.per_page!=this.per_page_code&&(""!=this.postData.per_page&&0!=this.postData.per_page||(this.postData.per_page=1),this.getData())}},watch:{"postData.per_page":{handler:function(e,t){1!=this.postData.per_page&&(this.postData.per_page=this.postData.per_page.replace(/[^0-9]/g,""))},deep:!0}},created:function(){this.$store.state.routerState.mydeviceList||(this.$store.commit("checkDeviceInfo","templateList"),this.getData())},activated:function(){this.$store.state.routerState.mydeviceList&&this.getData()},deactivated:function(){this.$store.commit("checkRouterSate",{boolean:!1,type:"mydeviceList"})}}},824:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"main-template"},[i("div",{staticClass:"main-container"},[i("div",{staticClass:"location-template noneBottomLink"},[i("el-row",[i("el-col",{attrs:{span:16}},[i("el-breadcrumb",[i("el-breadcrumb-item",[e._v("\n                            设备模板\n                        ")])],1)],1)],1)],1),e._v(" "),i("div",{staticClass:"table-template"},[i("div",{staticClass:"el-table-header"},[i("router-link",{attrs:{to:{name:"template_add"}}},[i("el-button",{staticClass:"btn-success ",attrs:{icon:"plus",size:"small",type:"success"}},[e._v("\n                        新增\n                    ")])],1),e._v(" "),i("el-button",{staticClass:"btn-success ",attrs:{icon:"delete",size:"small",type:"success"},on:{click:function(t){e.batchDeleteList(e.multipleSelection)}}},[e._v("\n                    删除\n                ")])],1),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{"max-height":"500",data:e.deviceList},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),i("el-table-column",{attrs:{label:"模板名称",prop:"name",width:""}}),e._v(" "),i("el-table-column",{attrs:{label:"模板别名",prop:"alias",width:""}}),e._v(" "),i("el-table-column",{attrs:{label:"套餐类型",prop:"combo_type",width:""}}),e._v(" "),i("el-table-column",{attrs:{label:"创建时间",prop:"created_at",width:""}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("router-link",{staticClass:"private-icon icon-detial",attrs:{title:"详情",to:{name:"device_template_edit",params:{id:t.row.id}}}}),e._v(" "),i("i",{staticClass:"private-icon icon-delete",attrs:{title:"移除"},on:{click:function(i){e.deleteList(t.$index,e.deviceList,t)}}})]}}])})],1)],1)])])},staticRenderFns:[]}}});