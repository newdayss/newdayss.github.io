webpackJsonp([31],{278:function(e,t,a){var n=a(14)(a(745),a(826),null,null);e.exports=n.exports},695:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={quicksort:function(e,t,a){if(t<a){for(var n=e[t],i=t,r=a;i<r;){for(;i<r&&e[r]>=n;)r--;for(e[i]=e[r];i<r&&e[i]<=n;)i++;e[r]=e[i]}e[i]=n,this.quicksort(e,t,i-1),this.quicksort(e,i+1,a)}},deepCopy:function(e){if(e instanceof Array){for(var t=[],a=0;a<e.length;++a)t[a]=this.deepCopy(e[a]);return t}if(e instanceof Object){var t={};for(var a in e)t[a]=this.deepCopy(e[a]);return t}return e}}},705:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DeviceReportExcel=t.GetFinanceList=t.SellerReportExcel=t.getSellerList=t.AddressReportExcel=t.GetFinanceAddress=t.GetFinanceAddressData=void 0;var i=a(99),r=(n(i),a(151)),s=n(r),l=a(75),o=(n(l),a(98)),c=(n(o),a(152)),u=n(c);n((n(a(153)),a(97))),t.GetFinanceAddressData=function(e){return s.default.Post(u.default.finance.report,e)},t.GetFinanceAddress=function(e){return s.default.Post(u.default.finance.addressArr,e)},t.AddressReportExcel=function(e){return s.default.Post(u.default.finance.addressReport,e)},t.getSellerList=function(e){return s.default.Post(u.default.finance.sellerList,e)},t.SellerReportExcel=function(e){return s.default.Post(u.default.finance.agentReport,e)},t.GetFinanceList=function(e){return s.default.Post(u.default.finance.report,e)},t.DeviceReportExcel=function(e){return s.default.Post(u.default.finance.deviceReport,e)}},745:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,a){function n(i,r){try{var s=t[i](r),l=s.value}catch(e){return void a(e)}if(!s.done)return Promise.resolve(l).then(function(e){n("next",e)},function(e){n("throw",e)});e(l)}return n("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(151),s=n(r),l=a(152),o=n(l);n(a(695)),a(705),t.default={data:function(){return{isBtn:!1,aliSubmitBtnName:!1,dialogTableVisible:!1,postData:{device_sn:"",type:"日",time1:[]},expands:[],dataList:[],detailList:[],page:1,per_page:10,per_page_code:10,currentPage:1,count:0,startDate:"",endDate:"",detail_sn:"",page_detail:1,per_page_detail:10,per_page_detail_code:10,currentPage_detail:1,count_detail:0,dayNum:30,calculation:!1,calcObj:{money:0}}},methods:{calculaOn:function(){if(this.calculation=!this.calculation,this.calculation){this.calcObj.money=0;var e=0;this.dataList.forEach(function(t){e+=parseFloat(t.money)}),this.calcObj.money=parseFloat(e).toFixed(2)}},changepick:function(){this.isBtn||(this.dayNum="",this.SearchSubmit())},getnowDay:function(){var e=new Date,t=e.getMonth()+1,a=e.getDate(),n=e.getFullYear();return a=a<10?"0"+a:a,t=t<10?"0"+t:t,n+"-"+t+"-"+a},historyTime:function(e){var t=this;if(this.dayNum!=e){if(this.dayNum=e,!e)return this.dayList=[],void this.SearchSubmit();var a=new Date;a.setTime(a.getTime()-864e5*e);var n=a.getMonth()+1,i=a.getDate(),r=a.getFullYear();i=i<10?"0"+i:i,n=n<10?"0"+n:n;var s=r+"-"+n+"-"+i,l=this.getnowDay();this.dayList=[],this.dayList[0]=s,this.dayList[1]=l;var o=[],c=a.toUTCString(),u=(new Date).toUTCString();o[0]=c,o[1]=u,this.postData.time1=o,this.isBtn=!0,setTimeout(function(){t.isBtn=!1},1e3),this.SearchSubmit()}},blurSunmitName:function(){var e=this;setTimeout(function(){e.aliSubmitBtnName=!1},200)},showTime:function(e){var t=+new Date-6048e5;this.endDate=new Date(t).format("yyyy-MM-dd");var a=+new Date;if(this.startDate=new Date(a).format("yyyy-MM-dd"),e.length,null==e[0]||null==e[1])return void(this.dayList="");var n=e.length>0?e[0].format("yyyy-MM-dd"):this.startDate,i=e.length>0?e[1].format("yyyy-MM-dd"):this.endDate;this.dayList=[],this.dayList.push(n),this.dayList.push(i)},rowClick:function(e,t,a){var n=this;return i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n.dialogTableVisible=!0,n.detail_sn=e.user_id,n.getDetail(0);case 3:case"end":return t.stop()}},t,n)}))()},getDetail:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return i(regeneratorRuntime.mark(function n(){var i,r,l,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.postData.time1&&t.showTime(t.postData.time1),i=new Map,i.set("日","day").set("月","month").set("周","week"),r={start_time:t.postData.time1?t.dayList[0]:"",end_time:t.postData.time1?t.dayList[1]:"",page:t.page_detail,per_page:t.per_page_detail,id:t.detail_sn,type:t.postData.type?i.get(t.postData.type):"day",is_export:a},l=e||r,n.prev=5,n.next=8,s.default.Post(o.default.finance.subsellerDetail,l);case 8:if(c=n.sent,1!=a){n.next=11;break}return n.abrupt("return",c);case 11:t.detailList=c.list,t.count_detail=c.count,t.per_page_detail_code=parseInt(t.per_page_detail),t.detailList.forEach(function(e){e.money=parseFloat(e.money/100).toFixed(2)}),n.next=22;break;case 17:n.prev=17,n.t0=n.catch(5),t.count_detail=0,t.detailList=[],console.log(n.t0);case 22:case"end":return n.stop()}},n,t,[[5,17]])}))()},deviceReportExcel:function(){var e=this;return i(regeneratorRuntime.mark(function t(){var a,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=e.getOption(),a.is_export=1,t.next=5,s.default.Post(o.default.finance.subsellerList,a);case 5:n=t.sent,window.location.href=n.url,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log("Ajax Error");case 12:case"end":return t.stop()}},t,e,[[0,9]])}))()},deviceReportExcelDeatil:function(){var e=this;return i(regeneratorRuntime.mark(function t(){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.getDetail(0,1);case 3:a=t.sent,window.location.href=a.url,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Ajax Error");case 10:case"end":return t.stop()}},t,e,[[0,7]])}))()},getSummaries:function(e){var t=e.columns,a=e.data,n=[],i=["real_name","phone","address","date","name"];return t.forEach(function(e,t){if(0===t)return void(n[t]="合计");var r=a.map(function(t){return Number(t[e.property])});r.every(function(e){return isNaN(e)})?n[t]="-":(n[t]=r.reduce(function(e,t){var a=Number(t);return isNaN(a)?e:e+t},0),i.includes(e.property)?n[t]="-":"money"==e.property&&(n[t]=n[t].toFixed(2)))}),n},changePageNum:function(){this.per_page!=this.per_page_code&&(""!=this.per_page&&0!=this.per_page||(this.per_page=1),this.postData.type=this.postData.type?this.postData.type:"day",this.getData())},changePageNumDetail:function(){this.per_page_detail!=this.per_page_detail_code&&(""!=this.per_page_detail&&0!=this.per_page_detail||(this.per_page_detail=1),this.getDetail())},getData:function(e){var t=this;return i(regeneratorRuntime.mark(function a(){var n,i,r,l,c,u,p;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.calculation=!1,n={},i="",r=+new Date-2592e6,t.endDate=new Date(r).format("yyyy-MM-dd"),l=+new Date,t.startDate=new Date(l).format("yyyy-MM-dd"),e||(i=[new Date(r),new Date(l)],t.postData.time1=i,n={per_page:t.per_page,page:t.page,start_time:i[0].format("yyyy-MM-dd"),end_time:i[1].format("yyyy-MM-dd")},t.postData.time1&&t.showTime(t.postData.time1)),c=e||n,a.prev=9,a.next=12,s.default.Post(o.default.finance.subsellerList,c);case 12:for(u=a.sent,p=0;p<u.list.length;p++)u.list[p].money=parseFloat(u.list[p].money/100).toFixed(2),t.dayList.length>0||null!=t.postData.time1[0]?u.list[p].time=t.dayList[0]+"-"+t.dayList[1]:u.list[p].time="-",u.list[p].detail=[],u.list[p].number=p,u.list[p].money_code=u.list[p].money;t.dataList=u.list,t.per_page_code=parseInt(t.per_page),t.count=u.count?u.count:t.count,a.next=24;break;case 19:a.prev=19,a.t0=a.catch(9),t.dataList=[],t.count=0,console.log(a.t0);case 24:case"end":return a.stop()}},a,t,[[9,19]])}))()},handleCurrentChange:function(e){var t=this;return i(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.page=e,a.t0=t,a.next=4,t.getOption(e);case 4:a.t1=a.sent,a.t0.getData.call(a.t0,a.t1);case 6:case"end":return a.stop()}},a,t)}))()},handleCurrentChangeDetail:function(e){var t=this;return i(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.page_detail=e,t.getDetail();case 2:case"end":return a.stop()}},a,t)}))()},SearchSubmit:function(){var e=this;return i(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,e.getOption();case 3:t.t1=t.sent,t.t0.getData.call(t.t0,t.t1);case 5:case"end":return t.stop()}},t,e)}))()},getOption:function(e){var t=new Map;t.set("日","day").set("月","month").set("周","week"),this.postData.time1&&""==this.dayNum&&this.showTime(this.postData.time1);var a=this.postData;void 0==a.time1&&(a.time1=[]);var n=a.device_sn?a.device_sn:"",i=a.time1.length>0?this.dayList[0]:"",r=a.time1.length>0?this.dayList[1]:"",s=(a.type&&t.get(a.type),e||this.page);return{keyword:n,start_time:i,end_time:r,per_page:this.per_page,page:s}}},watch:{per_page:function(){1!=this.per_page&&(this.per_page=this.per_page.replace(/[^0-9]/g,""))},per_page_detail:function(){1!=this.per_page_detail&&(this.per_page_detail=this.per_page_detail.replace(/[^0-9]/g,""))},"postData.type":{handler:function(e,t){this.page_detail=1,this.per_page_detail=10,this.getDetail()},deep:!0}},created:function(){this.$store.state.routerState.finance||(this.$store.commit("checkFinace","seller"),this.getData())},activated:function(){}}},826:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-template"},[a("div",{staticClass:"main-container",staticStyle:{"padding-top":"20px"}},[a("div",{staticClass:"newScreening"},[a("div",{staticClass:"newScreening-item"},[a("label",{attrs:{for:"newScreeningTwo"}},[e._v("时间区间：")]),e._v(" "),a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"-",placeholder:"选择日期范围","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:function(t){e.changepick()}},model:{value:e.postData.time1,callback:function(t){e.$set(e.postData,"time1",t)},expression:"postData.time1"}}),e._v(" "),a("label",{staticClass:"picker-data",attrs:{for:"newScreeningSix"}},[e._v("最近：")]),e._v(" "),a("ul",{staticClass:"newScreening-ul picker-data-ul clearfixed"},[a("li",{class:{active:30==e.dayNum},on:{click:function(t){e.historyTime(30)}}},[e._v("1个月")]),e._v(" "),a("li",{class:{active:90==e.dayNum},on:{click:function(t){e.historyTime(90)}}},[e._v("3个月")]),e._v(" "),a("li",{class:{active:180==e.dayNum},on:{click:function(t){e.historyTime(180)}}},[e._v("半年")])])],1),e._v(" "),a("div",{staticClass:"newScreening-item"},[a("label",{attrs:{for:"newScreeningOne"}},[e._v("姓      名：")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.postData.device_sn,expression:"postData.device_sn"}],attrs:{id:"newScreeningOne",placeholder:"请输入姓名"},domProps:{value:e.postData.device_sn},on:{focus:function(t){e.aliSubmitBtnName=!0},blur:function(t){e.blurSunmitName()},keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.SearchSubmit(t):null},input:function(t){t.target.composing||e.$set(e.postData,"device_sn",t.target.value)}}}),e._v(" "),a("span",{directives:[{name:"show",rawName:"v-show",value:e.aliSubmitBtnName,expression:"aliSubmitBtnName"}],staticClass:"aliSubmit",on:{click:e.SearchSubmit}},[e._v("确定")])])]),e._v(" "),a("div",{staticClass:"table-template"},[a("el-table",{attrs:{"row-key":"number",data:e.dataList,align:"center"}},[a("el-table-column",{attrs:{type:"index",width:"100",align:"center",label:"编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"center",label:"姓名",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"time",align:"center",label:"时间",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"money",align:"center",label:"收益(元)",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"",align:"center",label:"操作",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"final_detail",on:{click:function(a){e.rowClick(t.row)}}},[e._v("查看详情")])]}}])})],1),e._v(" "),a("div",{staticClass:"jump-ability clearfixed"},[a("div",{staticClass:"jump-btn",class:{"jump-none":0==e.dataList.length}},[a("span",{staticClass:"jump-text jump-bg1",class:{"jump-bg2":e.calculation},attrs:{unselectable:"on"},on:{click:function(t){t.preventDefault(),e.calculaOn()}}},[e._v("统计查询结果")]),e._v(" "),a("span",{class:{"jump-none":e.calculation}},[e._v("|")]),e._v(" "),a("span",{staticClass:"jump-text",on:{click:function(t){e.deviceReportExcel()}}},[e._v("下载查询结果")])]),e._v(" "),a("div",{staticClass:"page-change"},[a("div",{staticClass:"block pagination-template"},[a("el-pagination",{attrs:{layout:"prev, pager, next,jumper",total:e.count,"page-size":e.per_page_code,small:""},on:{"current-change":e.handleCurrentChange}})],1)]),e._v(" "),a("div",{staticClass:"page-number"},[e._v("每页显示\n                    "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.per_page,expression:"per_page"}],domProps:{value:e.per_page},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.changePageNum()},blur:function(t){e.changePageNum()},input:function(t){t.target.composing||(e.per_page=t.target.value)}}}),e._v("条\n                ")]),e._v(" "),a("div",{staticClass:"countNumber",staticStyle:{float:"right"}},[e._v("共"+e._s(e.count)+"条列表项")])]),e._v(" "),a("div",{staticClass:"calculateBox",class:{disNone:!e.calculation}},[e._v("\n               金额合计 "+e._s(e.calcObj.money)+" 元\n            ")])],1),e._v(" "),a("el-dialog",{attrs:{title:"合伙人收益详情",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("div",{staticClass:"search-template detailInput"},[a("el-form",{staticClass:"demo-form-inline",staticStyle:{"padding-left":"0"},attrs:{inline:!0,model:e.postData,labelWidth:"70px"}},[a("div",{staticClass:"grid-content bg-purple-dark form-grid-content"},[a("el-form-item",{staticClass:"needLeft",attrs:{label:"视　　图"}},[a("el-radio-group",{model:{value:e.postData.type,callback:function(t){e.$set(e.postData,"type",t)},expression:"postData.type"}},[a("el-radio-button",{attrs:{label:"月"}}),e._v(" "),a("el-radio-button",{attrs:{label:"日"}}),e._v(" "),a("el-radio-button",{attrs:{label:"周"}})],1)],1)],1)])],1),e._v(" "),a("div",{staticClass:"table-template"},[a("div",{staticClass:"table-title"},[a("button",{staticClass:"table-export",class:{"btn-noable":0==e.detailList.length},attrs:{disabled:0==e.detailList.length},on:{click:e.deviceReportExcelDeatil}},[a("span",[e._v("导出")])]),e._v(" "),a("span",{staticClass:"info-list"},[e._v("共"+e._s(e.count_detail)+"条列表项")])]),e._v(" "),a("el-table",{attrs:{"max-height":"300","show-summary":!0,"summary-method":e.getSummaries,data:e.detailList,align:"center"}},[a("el-table-column",{attrs:{type:"index",width:"50",align:"center",label:"编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sub_seller.name",align:"center",label:"合伙人",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"date",align:"center",label:"时间",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"money",align:"center",label:"金额(元)",width:""}})],1),e._v(" "),a("div",{staticClass:"jump-ability clearfixed",staticStyle:{"padding-bottom":"20px"}},[a("div",{staticClass:"page-change"},[a("div",{staticClass:"block pagination-template"},[a("el-pagination",{attrs:{layout:"prev, pager, next,jumper",total:e.count_detail,"page-size":e.per_page_detail_code,small:""},on:{"current-change":e.handleCurrentChangeDetail}})],1)]),e._v(" "),a("div",{staticClass:"page-number"},[e._v("每页显示\n                        "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.per_page_detail,expression:"per_page_detail"}],domProps:{value:e.per_page_detail},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.changePageNumDetail()},blur:function(t){e.changePageNumDetail()},input:function(t){t.target.composing||(e.per_page_detail=t.target.value)}}}),e._v("条\n                    ")])])],1)])],1)])},staticRenderFns:[]}}});