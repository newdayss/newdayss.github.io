webpackJsonp([54],{302:function(t,e,a){var i=a(14)(a(770),a(856),null,null);t.exports=i.exports},770:function(t,e,a){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,a){function i(n,r){try{var s=e[n](r),c=s.value}catch(t){return void a(t)}if(!s.done)return Promise.resolve(c).then(function(t){i("next",t)},function(t){i("throw",t)});t(c)}return i("next")})}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(151),s=i(r),c=a(152),o=i(c);e.default={data:function(){return{dayList:[],isBtn:!1,dayNum:"",postData:{page_number:1,per_page:10,per_page_code:10,time_cycle:""},per_page_code:10,deviceData:[],count:0,currentPage:1}},methods:{changepick:function(){this.isBtn||(this.dayNum="",this.SearchSubmit())},getnowDay:function(){var t=new Date,e=t.getMonth()+1,a=t.getDate(),i=t.getFullYear();return a=a<10?"0"+a:a,e=e<10?"0"+e:e,i+"-"+e+"-"+a},historyTime:function(t){var e=this;if(this.dayNum!=t){if(this.dayNum=t,!t)return this.dayList=[],this.postData.time_cycle="",void this.SearchSubmit();var a=new Date;if(1==t){var i=this.getnowDay();this.dayList=[],this.dayList[0]=i,this.dayList[1]=i;var n=[],r=(new Date).toUTCString();n[0]=r,n[1]=r,this.postData.time_cycle=n,this.isBtn=!0,setTimeout(function(){e.isBtn=!1},1e3)}else{a.setTime(a.getTime()-864e5*t);var s=a.getMonth()+1,c=a.getDate(),o=a.getFullYear();c=c<10?"0"+c:c,s=s<10?"0"+s:s;var u=o+"-"+s+"-"+c,l=this.getnowDay();this.dayList=[],this.dayList[0]=u,this.dayList[1]=l;var p=[],d=a.toUTCString(),h=(new Date).toUTCString();p[0]=d,p[1]=h,this.postData.time_cycle=p,this.isBtn=!0,setTimeout(function(){e.isBtn=!1},1e3)}this.SearchSubmit()}},showTime:function(t){var e=+new Date-6048e5,a=new Date(e).format("yyyy-MM-dd"),i=+new Date,n=new Date(i).format("yyyy-MM-dd");if(!t.length>0&&(t=[new Date(e),new Date(i)]),null==t[0]||null==t[1])return void(this.dayList=[]);var r=t.length>0?t[0].format("yyyy-MM-dd"):n,s=t.length>0?t[1].format("yyyy-MM-dd"):a;this.dayList=[],this.dayList.push(r),this.dayList.push(s)},getDataList:function(t,e){var a=this;return n(regeneratorRuntime.mark(function i(){var n,r;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return n=a.postData,a.deviceData=[],t&&(n.page_number=t),e&&(n.per_page=e),a.postData.time_cycle&&""==a.dayNum&&a.showTime(a.postData.time_cycle),i.next=7,s.default.Post(o.default.voucher.getQuanAddress,{start_date:a.dayList.length>1?a.dayList[0]:"",end_date:a.dayList.length>1?a.dayList[1]:"",page:n.page_number,per_page:n.per_page});case 7:r=i.sent,a.postData.per_page_code=parseInt(n.per_page),a.count=r.count,a.deviceData=r.list;case 11:case"end":return i.stop()}},i,a)}))()},changePageNum:function(){this.postData.per_page!=this.per_page_code&&(""!=this.postData.per_page&&0!=this.postData.per_page||(this.postData.per_page=1),this.getDataList(this.currentPage))},SearchSubmit:function(){var t=this;return n(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.getDataList(1);case 1:case"end":return e.stop()}},e,t)}))()},handleCurrentChange:function(t){this.currentPage=t,this.getDataList(this.currentPage)},create:function(){this.getDataList()}},created:function(){this.historyTime(7)},activated:function(){},watch:{"postData.per_page":{handler:function(t,e){1!=this.postData.per_page&&(this.postData.per_page=this.postData.per_page.replace(/[^0-9]/g,""))},deep:!0}}}},856:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"main-template",staticStyle:{"margin-top":"40px"}},[a("div",{staticClass:"main-container"},[a("div",{staticClass:"location-template"},[a("el-row",[a("el-col",[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[t._v("\n              地址统计\n            ")])],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"newScreening"},[a("div",{staticClass:"newScreening-item"},[a("label",{attrs:{for:"newScreeningFive"}},[t._v("时间区间：")]),t._v(" "),a("el-date-picker",{attrs:{type:"daterange",align:"right","unlink-panels":"","range-separator":"-",placeholder:"选择日期范围","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:function(e){t.changepick()}},model:{value:t.postData.time_cycle,callback:function(e){t.$set(t.postData,"time_cycle",e)},expression:"postData.time_cycle"}}),t._v(" "),a("ul",{staticClass:"newScreening-ul picker-data-ul clearfixed"},[a("li",{class:{active:""==t.dayNum},on:{click:function(e){t.historyTime("")}}},[t._v("全部")]),t._v(" "),a("li",{class:{active:7==t.dayNum},on:{click:function(e){t.historyTime(7)}}},[t._v("最近7天")]),t._v(" "),a("li",{class:{active:30==t.dayNum},on:{click:function(e){t.historyTime(30)}}},[t._v("最近30天")]),t._v(" "),a("li",{class:{active:180==t.dayNum},on:{click:function(e){t.historyTime(180)}}},[t._v("最近半年")])])],1)]),t._v(" "),a("div",{staticClass:"table-template"},[a("el-table",{staticStyle:{width:"100%"},attrs:{"min-height":"390",data:t.deviceData,"highlight-current-row":""}},[a("el-table-column",{attrs:{type:"index",width:"100",align:"center",label:"编号"}}),t._v(" "),a("el-table-column",{attrs:{label:"设备地址",property:"address","min-width":"220"}}),t._v(" "),a("el-table-column",{attrs:{label:"使用次数",property:"use_count","min-width":"100"}})],1),t._v(" "),a("div",{staticClass:"jump-ability clearfixed"},[a("div",{staticClass:"page-change"},[a("div",{staticClass:"block pagination-template"},[a("el-pagination",{attrs:{layout:"prev, pager, next,jumper",total:t.count,"page-size":t.postData.per_page_code,small:""},on:{"current-change":t.handleCurrentChange}})],1)]),t._v(" "),a("div",{staticClass:"page-number"},[t._v("每页显示\n          "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.postData.per_page,expression:"postData.per_page"}],domProps:{value:t.postData.per_page},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.changePageNum()},blur:function(e){t.changePageNum()},input:function(e){e.target.composing||t.$set(t.postData,"per_page",e.target.value)}}}),t._v("条\n        ")])])],1)])])},staticRenderFns:[]}}});