webpackJsonp([3],{105:function(e,t,r){var a=r(14)(r(741),r(854),null,null);e.exports=a.exports},696:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(e,t,r){t.length<2?r(new Error("请上传身份证正反面")):r()},s=function(e,t,r){0==parseFloat(t)&&r(new Error("不能为0")),/(\.\d{3})+/.test(t)?r(new Error("最多为两位小数")):r()};t.default={rules:{password:[{required:!0,message:"请输入用户密码",trigger:"blur"},{min:3,message:"最小不能小于6位",trigger:"blur"}],oldPassword:[{required:!0,trigger:"blur",message:"请输入当前密码"},{min:6,message:"当前密码不能小于6位"}],merchantName:[{required:!0,trigger:"blur",message:"请输入商户名称"},{max:64,message:"商户名称不能大于64位"}],mchDealType:{required:!0,message:"请选择商户经营类型"},isSetWechatPublicNo:{required:!0,message:"请选择是否有自己的公众号"},remark:[{required:!0,trigger:"blur",message:"说些什么..."},{max:128,message:"备注不能大于128位"}],merchantShortName:[{required:!0,trigger:"blur",message:"请输入商户名称"},{max:64,message:"商户简称不能小于64位"}],industrId:{required:!0,message:"请选择行业类型"},province:{required:!0,message:"请选择所在省"},city:{required:!0,message:"请选择请选择所在市"},address:{required:!0,message:"请输入详细地址"},tel:[{required:!0,message:"请输入手机号码",trigger:"blur"},{type:"string",pattern:/^1[3|6|5|7|8|9]\d{9}$/,message:"请输入正确的手机号"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式"}],legalPerson:[{required:!0,trigger:"blur",message:"请输入企业合法人"}],customerPhone:[{required:!0,trigger:"blur",message:"请输入客服电话，电话为手机号"},{type:"string",pattern:/^1[3|6|5|7|8|9]\d{9}$/,message:"请输入正确的手机号"}],principalMobile:[{required:!0,message:"请输入手机号码",trigger:"blur"},{type:"string",pattern:/^1[3|6|5|7|8|9]\d{9}$/,message:"请输入正确的手机号"}],principal:[{required:!0,trigger:"blur",message:"请输入负责人姓名"}],idCode:[{required:!0,message:"请输入身份证号",trigger:"blur"},{type:"string",pattern:/^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X)$/,message:"请输入正确的身份证号"}],idCard:[{required:!0,message:"请输入身份证号",trigger:"blur"},{type:"string",pattern:/^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X)$/,message:"请输入正确的身份证号"}],indentityPhoto:[{required:!0,message:"请上传身份证图片"},{required:!0,validator:a}],bankId:{required:!0,message:"请选择开户银行"},accountCode:[{required:!0,message:"请输入银行卡号",trigger:"blur"}],accountName:[{required:!0,message:"请输入开户人姓名",trigger:"blur"}],idCardType:[{required:!0,message:"请选择帐户类型",trigger:"blur"}],contactLine:[{required:!0,message:"请输入联行号",trigger:"blur"}],bankName:[{required:!0,message:"请输入开户支行名称",trigger:"blur"}],address_type:{required:!0,message:"请选择投放地址"},county:{required:!0,message:"请输入地区"},sn:[{required:!0,message:"请输入设备编号",trigger:"blur"},{min:6,message:"设备编号最小不能小于6位",trigger:"blur"}],alias:{required:!0,message:"请输入内容",trigger:"blur"},default_pay:[{required:!0,message:"请输入最低支付金额"},{pattern:/^\d+(\.\d+)?$/,message:"金额只能为数字"}],template_file:{required:!0,message:"请选择支付模板"},address_id:{required:!0,message:"请选择投放地址"},type:{required:!0,message:"请选择设备类型"},mode:{required:!0,message:"请选择工作模式"},title:[{required:!0,message:"请输入标题"}],money:[{required:!0,message:"请输入付款金额"},{pattern:/^\d+(\.\d+)?$/,message:"付款金额只能为数字"}],pulse:[{required:!0,message:"请输入数量"},{pattern:/^\d+(\.\d+)?$/,message:"数量只能为数字"}],name:[{required:!0,message:"请输入用户名",trigger:"blur"}],bank:[{required:!0,message:"请输入开户银行",trigger:"blur"}],account_name:[{required:!0,message:" 请输入户名",trigger:"blur"}],account:[{required:!0,message:" 请输入银行卡号",trigger:"blur"},{required:!0,message:"请输入银行卡号",trigger:"blur"}],percent:[{required:!0,message:" 请输入分成比例"},{pattern:/^\d+(\.\d+)?$/,message:"分成比例只能为数字"}],phone:[{required:!0,message:"请输入手机号码",trigger:"blur"},{type:"string",pattern:/^1[3|6|5|7|8|9]\d{9}$/,message:"请输入正确的手机号"}],user_name:[{required:!0,message:"请输入手机号码",trigger:"blur"},{type:"string",pattern:/^1[3|5|6|7|8|9]\d{9}$/,message:"请输入正确的手机号"}],user:[{required:!0,message:"请输入手机号码",trigger:"blur"},{type:"string",pattern:/^1[3|5|6|7|8|9]\d{9}$/,message:"请输入正确的账号"}],nickname:[{required:!0,message:"请输入昵称",trigger:"blur"}],auth:[{required:!0,message:"请选择权限"}],type_default_1:[{required:!0,message:" 请输入每秒最低收费多少元"},{pattern:/^\d+(\.\d+)?$/,message:"收费只能为数字"},{required:!0,validator:s}],type_default_2:[{required:!0,message:" 请输入每秒最低收费多少元"},{pattern:/^\d+(\.\d+)?$/,message:"收费只能为数字"},{required:!0,validator:s}],type_default_3:[{required:!0,message:" 请输入每秒最低收费多少元"},{pattern:/^\d+(\.\d+)?$/,message:"收费只能为数字"},{required:!0,validator:s}],type_default_4:[{required:!0,message:" 请输入每秒最低收费多少元"},{pattern:/^\d+(\.\d+)?$/,message:"收费只能为数字"},{required:!0,validator:s}],type_default_5:[{required:!0,message:" 请输入每秒最低收费多少元"},{pattern:/^\d+(\.\d+)?$/,message:"收费只能为数字"},{required:!0,validator:s}],recharge_money:[{required:!0,message:"请输入对应的金额",trigger:"blur"},{pattern:/^([1-9]\d{0,9}|0)([.]?|(\.\d{1,2})?)$/,message:"请输入正确的金额"}],actual_money:[{required:!0,message:"请输入对应的金额",trigger:"blur"},{pattern:/^([1-9]\d{0,9}|0)([.]?|(\.\d{1,2})?)$/,message:"请输入正确的金额"}],day:[{required:!0,message:"请输入活动日期"}],combo:[{required:!0,message:"请输入套餐名",trigger:"blur"}],min_cash:[{required:!0,message:"请输入最低提现金额",trigger:"blur"},{pattern:/^([1-9]\d{0,9}|0)([.]?|(\.\d{1,2})?)$/,message:"请输入正确的金额"}],edit_device_auth:[{required:!0,message:"请选择套餐权限"}]}}},741:function(e,t,r){"use strict";function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function a(s,i){try{var n=t[s](i),l=n.value}catch(e){return void r(e)}if(!n.done)return Promise.resolve(l).then(function(e){a("next",e)},function(e){a("throw",e)});e(l)}return a("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var s=r(779),i=r(696);!function(e){e&&e.__esModule}(i),t.default={data:function(){return{postData:{SearchKey:"",status:"1",newStatus:"3"},lock:0,per_page_code:10,tableList:[],page:1,per_page:10,count:0,dialogFormVisible:!1,dialogDeclare:!1,currentPage:1,itemData:{},form1:{fixed_info:""},formDeclare:{sn:"",type:"",detail:"",name:""},rules:{fixed_info:[{required:!0,message:"请输入修复人",trigger:"blur"},{min:2,message:"长度在不能小于2个字符",trigger:"blur"}]}}},methods:{resetForm:function(e){this.$refs[e].resetFields()},declaration:function(){},SearchSubmit:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var r,a,i,n,l,o,u,c,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r={page:e.page,per_page:e.per_page,device_sn:e.postData.SearchKey,status:e.postData.status?e.postData.status:"",repair:e.postData.newStatus?e.postData.newStatus:""},t.prev=1,t.next=4,(0,s.GetFautList)(r);case 4:for(a=t.sent,i=new Map,i.set("0","未解决").set("1","解决中").set("2","已解决"),n=!0,l=!1,o=void 0,t.prev=10,u=a.list[Symbol.iterator]();!(n=(c=u.next()).done);n=!0)p=c.value,p.status=i.get(p.status),0==p.fixed_time&&(p.fixed_time="--");t.next=18;break;case 14:t.prev=14,t.t0=t.catch(10),l=!0,o=t.t0;case 18:t.prev=18,t.prev=19,!n&&u.return&&u.return();case 21:if(t.prev=21,!l){t.next=24;break}throw o;case 24:return t.finish(21);case 25:return t.finish(18);case 26:e.tableList=a.list,e.count=a.count?a.count:1,t.next=34;break;case 31:t.prev=31,t.t1=t.catch(1),console.log("Ajax dataURL.wrong.list Error");case 34:case"end":return t.stop()}},t,e,[[1,31],[10,14,18,26],[19,,21,25]])}))()},changePageNum:function(){this.per_page!=this.per_page_code&&(""!=this.per_page&&0!=this.per_page||(this.per_page=1),this.getData({page:this.page,per_page:this.per_page}))},getData:function(e){var t=this;return a(regeneratorRuntime.mark(function r(){var a,i,n,l,o,u,c,p,g;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a=e||{page:t.page,per_page:t.per_page},0==t.lock&&(t.lock++,a=e||{page:t.page,per_page:t.per_page,repair:t.$route.params.id}),r.prev=2,r.next=5,(0,s.GetFautList)(a);case 5:for(i=r.sent,n=new Map,n.set("0","未解决").set("1","解决中").set("2","已解决"),l=!0,o=!1,u=void 0,r.prev=11,c=i.list[Symbol.iterator]();!(l=(p=c.next()).done);l=!0)g=p.value,g.status=n.get(g.status),0==g.fixed_time&&(g.fixed_time="--");r.next=19;break;case 15:r.prev=15,r.t0=r.catch(11),o=!0,u=r.t0;case 19:r.prev=19,r.prev=20,!l&&c.return&&c.return();case 22:if(r.prev=22,!o){r.next=25;break}throw u;case 25:return r.finish(22);case 26:return r.finish(19);case 27:t.per_page_code=parseInt(t.per_page),t.tableList=i.list,t.count=i.count?i.count:1,r.next=36;break;case 33:r.prev=33,r.t1=r.catch(2),console.log("Ajax dataURL.wrong.list Error");case 36:case"end":return r.stop()}},r,t,[[2,33],[11,15,19,27],[20,,22,26]])}))()},showDiolog:function(e){this.itemData=e,this.dialogFormVisible=!0},confirmation:function(e){var t=this;return a(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:t.itemData=e,t.$confirm("确认设备已修复完成?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(a(regeneratorRuntime.mark(function e(){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.WrongFix)({id:t.itemData.id});case 2:r=e.sent,t.$notify({title:"温馨提示",message:"确认成功",type:"success"}),t.itemData.status="已解决",t.getData({page:t.page,per_page:t.per_page});case 6:case"end":return e.stop()}},e,t)}))).catch(function(){t.$notify({title:"温馨提示",message:"已取消确认",type:"info"})});case 2:case"end":return r.stop()}},r,t)}))()},submitFix:function(e){var t=this;return a(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:t.$refs[e].validate(function(){var e=a(regeneratorRuntime.mark(function e(r){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=3;break}return console.log("submit Error"),e.abrupt("return");case 3:return e.next=5,(0,s.WrongFix)({id:t.itemData.id,fixed_info:t.form1.fixed_info});case 5:a=e.sent,t.itemData.status="解决中",t.itemData.fixed_info=t.form1.fixed_info,t.dialogFormVisible=!1,t.resetForm("form1"),t.getData({page:t.page,per_page:t.per_page});case 11:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return r.stop()}},r,t)}))()},handleCurrentChange:function(e){this.currentPage=e,this.getData({page:e,per_page:this.per_page})}},watch:{per_page:function(){1!=this.per_page&&(this.per_page=this.per_page.replace(/[^0-9]/g,""))}},created:function(){this.getData()},activated:function(){this.lock=0,this.getData()}}},779:function(e,t,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.WrongFix=t.GetFautList=void 0;var s=r(99),i=(a(s),r(151)),n=a(i),l=r(75),o=(a(l),r(98)),u=(a(o),r(152)),c=a(u);a((a(r(153)),r(97))),t.GetFautList=function(e){return n.default.Post(c.default.wrong.list,{page:e.page,per_page:e.per_page,device_sn:e.device_sn,status:e.status,repair:e.repair})},t.WrongFix=function(e){return n.default.Post(c.default.wrong.fix,{id:e.id,fixed_info:e.fixed_info})}},854:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main-template"},[r("div",{staticClass:"notify-excel",staticStyle:{"margin-top":"20px","padding-bottom":"50px",height:"auto"}},[r("div",{staticClass:"location-template"},[r("el-row",[r("el-col",[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",[e._v("\n                            故障管理\n                        ")])],1)],1)],1)],1),e._v(" "),r("div",{staticClass:"table-template"},[r("div",{staticClass:"search-template",staticStyle:{padding:"10px 0 0 0"}},[r("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.postData}},[r("el-form-item",{attrs:{"label-with":"0"}},[r("el-input",{attrs:{"on-icon-click":e.SearchSubmit,icon:"search",placeholder:"请输入设备编号或别名"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.SearchSubmit(t):null}},model:{value:e.postData.SearchKey,callback:function(t){e.$set(e.postData,"SearchKey",t)},expression:"postData.SearchKey"}})],1),e._v(" "),r("zx-toggle",{attrs:{title:"基础筛选",toggletitle:"高级筛选"}},[r("el-form-item",{attrs:{label:"故障类型"}},[r("el-select",{staticClass:"form-select",attrs:{placeholder:"请选择使用状态"},model:{value:e.postData.status,callback:function(t){e.$set(e.postData,"status",t)},expression:"postData.status"}},[r("el-option",{attrs:{label:"全部",value:"1"}}),e._v(" "),r("el-option",{attrs:{label:"系统故障",value:"2"}}),e._v(" "),r("el-option",{attrs:{label:"权限故障",value:"3"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"修复状态"}},[r("el-select",{staticClass:"form-select",attrs:{placeholder:"请选择故障状态"},model:{value:e.postData.newStatus,callback:function(t){e.$set(e.postData,"newStatus",t)},expression:"postData.newStatus"}},[r("el-option",{attrs:{label:"全部",value:"3"}}),e._v(" "),r("el-option",{attrs:{label:"已解决",value:"2"}}),e._v(" "),r("el-option",{attrs:{label:"解决中",value:"1"}}),e._v(" "),r("el-option",{attrs:{label:"未解决",value:"0"}})],1)],1),e._v(" "),r("div",{staticClass:"search-btn-wrap float-r"},[r("el-button",{staticClass:"search-btn ",attrs:{size:"small",type:"success"},on:{click:e.SearchSubmit}},[e._v("\n                                搜索\n                            ")])],1)],1)],1)],1),e._v(" "),r("div",{staticClass:"table-title"},[r("span",{staticClass:"info-list"},[e._v("\n                    共"+e._s(e.count)+"条列表项\n                ")])]),e._v(" "),r("el-table",{attrs:{"min-height":"360",data:e.tableList,align:"center"}},[r("el-table-column",{attrs:{align:"center",label:"编号",prop:"id",width:"100"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"设备编号",prop:"device_sn",width:""}}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"设备名称",prop:"alias.alias",width:"150"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"故障类型",prop:"wrong_type",width:"100"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"故障详情",prop:"wrong_info",width:"150"}}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"故障时间",prop:"create_time",width:""}}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"修复时间",prop:"fixed_time",width:""}}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"修复状态",prop:"status",width:""}}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"负责人",prop:"fixed_info",width:""}}),e._v(" "),r("el-table-column",{attrs:{align:"center",label:"操作",prop:"address",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{directives:[{name:"show",rawName:"v-show",value:"未解决"==t.row.status,expression:'scope.row.status=="未解决"'}],staticClass:"repair-icon",attrs:{title:"开始修复"},on:{click:function(r){e.showDiolog(t.row)}}},[r("span")]),e._v(" "),r("div",{directives:[{name:"show",rawName:"v-show",value:"解决中"==t.row.status,expression:'scope.row.status=="解决中"'}],staticClass:"repairConfirm-icon",attrs:{title:"确认修复"},on:{click:function(r){e.confirmation(t.row)}}},[r("span")])]}}])})],1),e._v(" "),r("div",{staticClass:"block pagination-template",staticStyle:{display:"flex","justify-content":"space-between"}},[r("div",{staticClass:"jump-ability clearfixed"},[r("div",{staticClass:"page-change"},[r("div",{staticClass:"block pagination-template"},[r("el-pagination",{attrs:{layout:"prev, pager, next,jumper",total:e.count,"page-size":e.per_page_code,small:""},on:{"current-change":e.handleCurrentChange}})],1)]),e._v(" "),r("div",{staticClass:"page-number"},[e._v("每页显示\n                        "),r("input",{directives:[{name:"model",rawName:"v-model",value:e.per_page,expression:"per_page"}],domProps:{value:e.per_page},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.changePageNum()},blur:function(t){e.changePageNum()},input:function(t){t.target.composing||(e.per_page=t.target.value)}}}),e._v("条\n                    ")])])])],1)]),e._v(" "),r("el-dialog",{attrs:{title:"故障修复"},model:{value:e.dialogFormVisible,callback:function(t){e.dialogFormVisible=t},expression:"dialogFormVisible"}},[r("el-form",{ref:"form1",attrs:{model:e.form1,rules:e.rules}},[r("el-form-item",{attrs:{label:"负责人:","label-width":"",prop:"fixed_info"}},[r("el-input",{attrs:{placeholder:"请输入修复人",type:"text"},model:{value:e.form1.fixed_info,callback:function(t){e.$set(e.form1,"fixed_info",t)},expression:"form1.fixed_info"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitFix("form1")}}},[e._v("\n                开始修复\n            ")])],1)],1),e._v(" "),r("el-dialog",{staticClass:"dialogDeclare",attrs:{title:"故障申报"},model:{value:e.dialogDeclare,callback:function(t){e.dialogDeclare=t},expression:"dialogDeclare"}},[r("el-form",{ref:"formDeclare",attrs:{model:e.formDeclare,rules:e.rules}},[r("el-form-item",{attrs:{label:"设备编号:","label-width":""}},[r("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入设备编号",type:"text"},model:{value:e.formDeclare.sn,callback:function(t){e.$set(e.formDeclare,"sn",t)},expression:"formDeclare.sn"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"设备别名:","label-width":""}},[r("el-input",{attrs:{"auto-complete":"off",placeholder:"请输入设备别名",type:"text"},model:{value:e.formDeclare.name,callback:function(t){e.$set(e.formDeclare,"name",t)},expression:"formDeclare.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"故障类型:","label-width":""}},[r("el-select",{attrs:{placeholder:"请选择故障类型"},model:{value:e.formDeclare.type,callback:function(t){e.$set(e.formDeclare,"type",t)},expression:"formDeclare.type"}},[r("el-option",{attrs:{label:"e0",value:"0"}}),e._v(" "),r("el-option",{attrs:{label:"e1",value:"1"}}),e._v(" "),r("el-option",{attrs:{label:"e2",value:"2"}}),e._v(" "),r("el-option",{attrs:{label:"e3",value:"3"}}),e._v(" "),r("el-option",{attrs:{label:"e4",value:"4"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"故障详情:","label-width":""}},[r("el-input",{attrs:{"auto-complete":"off",placeholder:"故障详情",type:"text"},model:{value:e.formDeclare.detail,callback:function(t){e.$set(e.formDeclare,"detail",t)},expression:"formDeclare.detail"}})],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogDeclare=!1}}},[e._v("\n                取消\n            ")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.declaration("formDeclare")}}},[e._v("\n                确定\n            ")])],1)],1)],1)},staticRenderFns:[]}}});