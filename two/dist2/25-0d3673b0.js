webpackJsonp([25],{262:function(e,r,t){var s=t(14)(t(727),t(844),null,null);e.exports=s.exports},694:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={quicksort:function(e,r,t){if(r<t){for(var s=e[r],a=r,i=t;a<i;){for(;a<i&&e[i]>=s;)i--;for(e[a]=e[i];a<i&&e[a]<=s;)a++;e[i]=e[a]}e[a]=s,this.quicksort(e,r,a-1),this.quicksort(e,a+1,t)}},deepCopy:function(e){if(e instanceof Array){for(var r=[],t=0;t<e.length;++t)r[t]=this.deepCopy(e[t]);return r}if(e instanceof Object){var r={};for(var t in e)r[t]=this.deepCopy(e[t]);return r}return e}}},695:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var s=function(e,r,t){r.length<2?t(new Error("请上传身份证正反面")):t()},a=function(e,r,t){0==parseFloat(r)&&t(new Error("不能为0")),/(\.\d{3})+/.test(r)?t(new Error("最多为两位小数")):t()};r.default={rules:{password:[{required:!0,message:"请输入用户密码",trigger:"blur"},{min:3,message:"最小不能小于6位",trigger:"blur"}],oldPassword:[{required:!0,trigger:"blur",message:"请输入当前密码"},{min:6,message:"当前密码不能小于6位"}],merchantName:[{required:!0,trigger:"blur",message:"请输入商户名称"},{max:64,message:"商户名称不能大于64位"}],mchDealType:{required:!0,message:"请选择商户经营类型"},isSetWechatPublicNo:{required:!0,message:"请选择是否有自己的公众号"},remark:[{required:!0,trigger:"blur",message:"说些什么..."},{max:128,message:"备注不能大于128位"}],merchantShortName:[{required:!0,trigger:"blur",message:"请输入商户名称"},{max:64,message:"商户简称不能小于64位"}],industrId:{required:!0,message:"请选择行业类型"},province:{required:!0,message:"请选择所在省"},city:{required:!0,message:"请选择请选择所在市"},address:{required:!0,message:"请输入详细地址"},tel:[{required:!0,message:"请输入手机号码",trigger:"blur"},{type:"string",pattern:/^1[3|6|5|7|8|9]\d{9}$/,message:"请输入正确的手机号"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱格式"}],legalPerson:[{required:!0,trigger:"blur",message:"请输入企业合法人"}],customerPhone:[{required:!0,trigger:"blur",message:"请输入客服电话，电话为手机号"},{type:"string",pattern:/^1[3|6|5|7|8|9]\d{9}$/,message:"请输入正确的手机号"}],principalMobile:[{required:!0,message:"请输入手机号码",trigger:"blur"},{type:"string",pattern:/^1[3|6|5|7|8|9]\d{9}$/,message:"请输入正确的手机号"}],principal:[{required:!0,trigger:"blur",message:"请输入负责人姓名"}],idCode:[{required:!0,message:"请输入身份证号",trigger:"blur"},{type:"string",pattern:/^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X)$/,message:"请输入正确的身份证号"}],idCard:[{required:!0,message:"请输入身份证号",trigger:"blur"},{type:"string",pattern:/^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X)$/,message:"请输入正确的身份证号"}],indentityPhoto:[{required:!0,message:"请上传身份证图片"},{required:!0,validator:s}],bankId:{required:!0,message:"请选择开户银行"},accountCode:[{required:!0,message:"请输入银行卡号",trigger:"blur"}],accountName:[{required:!0,message:"请输入开户人姓名",trigger:"blur"}],idCardType:[{required:!0,message:"请选择帐户类型",trigger:"blur"}],contactLine:[{required:!0,message:"请输入联行号",trigger:"blur"}],bankName:[{required:!0,message:"请输入开户支行名称",trigger:"blur"}],address_type:{required:!0,message:"请选择投放地址"},county:{required:!0,message:"请输入地区"},sn:[{required:!0,message:"请输入设备编号",trigger:"blur"},{min:6,message:"设备编号最小不能小于6位",trigger:"blur"}],alias:{required:!0,message:"请输入内容",trigger:"blur"},default_pay:[{required:!0,message:"请输入最低支付金额"},{pattern:/^\d+(\.\d+)?$/,message:"金额只能为数字"}],template_file:{required:!0,message:"请选择支付模板"},address_id:{required:!0,message:"请选择投放地址"},type:{required:!0,message:"请选择设备类型"},mode:{required:!0,message:"请选择工作模式"},title:[{required:!0,message:"请输入标题"}],money:[{required:!0,message:"请输入付款金额"},{pattern:/^\d+(\.\d+)?$/,message:"付款金额只能为数字"}],pulse:[{required:!0,message:"请输入数量"},{pattern:/^\d+(\.\d+)?$/,message:"数量只能为数字"}],name:[{required:!0,message:"请输入用户名",trigger:"blur"}],bank:[{required:!0,message:"请输入开户银行",trigger:"blur"}],account_name:[{required:!0,message:" 请输入户名",trigger:"blur"}],account:[{required:!0,message:" 请输入银行卡号",trigger:"blur"},{required:!0,message:"请输入银行卡号",trigger:"blur"}],percent:[{required:!0,message:" 请输入分成比例"},{pattern:/^\d+(\.\d+)?$/,message:"分成比例只能为数字"}],phone:[{required:!0,message:"请输入手机号码",trigger:"blur"},{type:"string",pattern:/^1[3|6|5|7|8|9]\d{9}$/,message:"请输入正确的手机号"}],user_name:[{required:!0,message:"请输入手机号码",trigger:"blur"},{type:"string",pattern:/^1[3|5|6|7|8|9]\d{9}$/,message:"请输入正确的手机号"}],user:[{required:!0,message:"请输入手机号码",trigger:"blur"},{type:"string",pattern:/^1[3|5|6|7|8|9]\d{9}$/,message:"请输入正确的账号"}],nickname:[{required:!0,message:"请输入昵称",trigger:"blur"}],auth:[{required:!0,message:"请选择权限"}],type_default_1:[{required:!0,message:" 请输入每秒最低收费多少元"},{pattern:/^\d+(\.\d+)?$/,message:"收费只能为数字"},{required:!0,validator:a}],type_default_2:[{required:!0,message:" 请输入每秒最低收费多少元"},{pattern:/^\d+(\.\d+)?$/,message:"收费只能为数字"},{required:!0,validator:a}],type_default_3:[{required:!0,message:" 请输入每秒最低收费多少元"},{pattern:/^\d+(\.\d+)?$/,message:"收费只能为数字"},{required:!0,validator:a}],type_default_4:[{required:!0,message:" 请输入每秒最低收费多少元"},{pattern:/^\d+(\.\d+)?$/,message:"收费只能为数字"},{required:!0,validator:a}],type_default_5:[{required:!0,message:" 请输入每秒最低收费多少元"},{pattern:/^\d+(\.\d+)?$/,message:"收费只能为数字"},{required:!0,validator:a}],recharge_money:[{required:!0,message:"请输入对应的金额",trigger:"blur"},{pattern:/^([1-9]\d{0,9}|0)([.]?|(\.\d{1,2})?)$/,message:"请输入正确的金额"}],actual_money:[{required:!0,message:"请输入对应的金额",trigger:"blur"},{pattern:/^([1-9]\d{0,9}|0)([.]?|(\.\d{1,2})?)$/,message:"请输入正确的金额"}],day:[{required:!0,message:"请输入活动日期"}],combo:[{required:!0,message:"请输入套餐名",trigger:"blur"}],min_cash:[{required:!0,message:"请输入最低提现金额",trigger:"blur"},{pattern:/^([1-9]\d{0,9}|0)([.]?|(\.\d{1,2})?)$/,message:"请输入正确的金额"}],edit_device_auth:[{required:!0,message:"请选择套餐权限"}]}}},698:function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default={ToBase64:function(e){return new Promise(function(r,t){var s=new FileReader;s.readAsDataURL(e),s.onload=function(e){r(this.result)}})}}},727:function(e,r,t){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function a(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){function s(a,i){try{var o=r[a](i),l=o.value}catch(e){return void t(e)}if(!o.done)return Promise.resolve(l).then(function(e){s("next",e)},function(e){s("throw",e)});e(l)}return s("next")})}}Object.defineProperty(r,"__esModule",{value:!0});var i=t(151),o=s(i),l=t(694),n=s(l),u=t(698),d=s(u),m=t(152),c=s(m),g=t(695),p=s(g);r.default={data:function(){return{ComboEditMode:"add",queryID:"",addressList:[],templateFileList:[],SelectImg:"",combo:{pulse:"",money:"",title:"",image:""},ruleForm:{alias:"",default_pay:"",template_file:"",sn:"",address_id:"",password:"",type:"",combo:[]},rules:p.default.rules,dialogFormVisible:!1,dialogModel:!1,formLabelWidth:"120px"}},computed:{pageMode:function(){return!!this.$route.query.id&&(this.rules.sn=[],!0)},templateFile:function(){return"buy.html"==this.ruleForm.template_file?"通用":"无键盘"}},methods:{sendDate:function(e){var r=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r.$refs[e].validate(function(){var e=a(regeneratorRuntime.mark(function e(t){var s,a,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=26;break}if("add"!=r.ComboEditMode){e.next=11;break}if(s=n.default.deepCopy(r.combo),!r.SelectImg){e.next=8;break}return e.next=6,o.default.Post(c.default.uploadImg,{img:r.SelectImg});case 6:a=e.sent,s.image=a.url;case 8:r.ruleForm.combo.push(s),e.next=22;break;case 11:if(r.SelectImg==r.combo.image||!r.SelectImg){e.next=22;break}return e.prev=12,e.next=15,o.default.Post(c.default.uploadImg,{img:r.SelectImg});case 15:i=e.sent,r.combo.image=i.url,e.next=22;break;case 19:e.prev=19,e.t0=e.catch(12),console.info(e.t0);case 22:r.dialogFormVisible=!1,r.combo={},e.next=28;break;case 26:return console.log("error submit!!"),e.abrupt("return",!1);case 28:case"end":return e.stop()}},e,r,[[12,19]])}));return function(r){return e.apply(this,arguments)}}());case 1:case"end":return t.stop()}},t,r)}))()},resetForm:function(e){this.$refs[e].resetFields()},Save:function(e){var r=this,t=this;this.$refs[e].validate(function(){var e=a(regeneratorRuntime.mark(function e(s){var a,i,l,u,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=3;break}return console.log("error submit!!"),e.abrupt("return",!1);case 3:if(a=n.default.deepCopy(r.ruleForm),i=r.ruleForm,e.prev=5,!r.queryID){e.next=13;break}return e.next=9,o.default.Post(c.default.device.edit,a);case 9:l=e.sent,r.$notify({title:"请求提示",message:"修改成功",type:"success"}),e.next=17;break;case 13:return e.next=15,o.default.Post(c.default.device.join,a);case 15:u=e.sent,r.$notify({title:"请求提示",message:"新增成功",type:"success"});case 17:d=setTimeout(function(){clearTimeout(d),t.$router.push("/device/template")},2e3),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(5),console.info(e.t0);case 23:case"end":return e.stop()}},e,r,[[5,20]])}));return function(r){return e.apply(this,arguments)}}())},ComboImgChange:function(e){var r=this;return a(regeneratorRuntime.mark(function t(){var s,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s=e.target.files[0],/image\/\w+/.test(s.type)||r.$notify({title:"请求提示",message:"请选择图片！",type:"error"}),t.next=4,d.default.ToBase64(s);case 4:a=t.sent,r.SelectImg=a;case 6:case"end":return t.stop()}},t,r)}))()},EditComboInit:function(e){this.ComboEditMode="edit",this.dialogFormVisible=!0,this.combo=e,e.image?this.SelectImg=e.image:this.SelectImg=""},AddComboInit:function(){this.dialogFormVisible=!0,this.ComboEditMode="add",this.combo={pulse:"",money:"",title:"",image:""},this.SelectImg="",this.$refs.combo&&this.$refs.combo.resetFields()},showDialogModel:function(){this.dialogModel=!0},selectModel:function(e){this.ruleForm.template_file=e,this.dialogModel=!1},getData:function(){var e=this;return a(regeneratorRuntime.mark(function r(){var t,s,a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(e.queryID=e.$route.query.id,!e.$route.query.id){r.next=10;break}return console.log("Edit"),r.next=5,o.default.Get(c.default.device.details+"?id="+e.$route.query.id,!1);case 5:t=r.sent,0==t.address_id&&(t.address_id=""),e.ruleForm=t,r.next=11;break;case 10:console.log("Add");case 11:return r.next=13,o.default.Post(c.default.device.getTemplateFile,!1);case 13:return s=r.sent,e.templateFileList=s,r.next=17,o.default.Get(c.default.personal.list);case 17:a=r.sent,e.addressList=a.data;case 19:case"end":return r.stop()}},r,e)}))()}},created:function(){var e=this;return a(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:e.getData();case 1:case"end":return r.stop()}},r,e)}))()}}},844:function(e,r){e.exports={render:function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"main-template"},[t("div",{staticClass:"main-container",staticStyle:{"margin-top":"20px"}},[t("div",{staticClass:"location-template"},[t("el-row",[t("el-col",{attrs:{lg:{span:16},xs:{span:12},sm:{span:14},md:{span:16}}},[t("el-breadcrumb",[t("el-breadcrumb-item",[e._v("新增设备")])],1)],1)],1)],1),e._v(" "),t("el-row",{attrs:{gutter:10}},[t("el-col",{attrs:{lg:{span:14,offset:3},xs:{span:20,offset:2},sm:{span:18,offset:3},md:{span:16,offset:4}}},[t("div",{staticClass:"grid-content bg-purple-dark"},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"150px"}},[t("el-form-item",{attrs:{label:"编号：",prop:"sn"}},[t("el-input",{attrs:{placeholder:"请输入设备编号",disabled:e.pageMode},model:{value:e.ruleForm.sn,callback:function(r){e.$set(e.ruleForm,"sn",r)},expression:"ruleForm.sn"}})],1),e._v(" "),e.pageMode?e._e():t("el-form-item",{attrs:{label:"密码：",prop:"password"}},[t("el-input",{attrs:{type:"password",placeholder:"请输入密码"},model:{value:e.ruleForm.password,callback:function(r){e.$set(e.ruleForm,"password",r)},expression:"ruleForm.password"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"别名：",prop:"alias"}},[t("el-input",{attrs:{placeholder:"请输入别名"},model:{value:e.ruleForm.alias,callback:function(r){e.$set(e.ruleForm,"alias",r)},expression:"ruleForm.alias"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"最低支付金额：",prop:"default_pay"}},[t("el-input",{attrs:{placeholder:"请输入最低支付金额"},model:{value:e.ruleForm.default_pay,callback:function(r){e.$set(e.ruleForm,"default_pay",r)},expression:"ruleForm.default_pay"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"支付页面模板：",prop:"template_file"}},[t("el-select",{attrs:{placeholder:"请选择支付页面模板"},model:{value:e.ruleForm.template_file,callback:function(r){e.$set(e.ruleForm,"template_file",r)},expression:"ruleForm.template_file"}},e._l(e.templateFileList,function(e){return t("el-option",{attrs:{label:e.template_name,value:e.template_key}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"投放地址选择：",prop:"address_id"}},[t("el-select",{attrs:{placeholder:"请选择投放地址"},model:{value:e.ruleForm.address_id,callback:function(r){e.$set(e.ruleForm,"address_id",r)},expression:"ruleForm.address_id"}},e._l(e.addressList,function(e){return t("el-option",{attrs:{label:e.address,value:e.id}})}),1)],1),e._v(" "),t("el-form-item",{attrs:{label:"设备类型",prop:"type"}},[t("el-select",{attrs:{placeholder:"请选择设备类型"},model:{value:e.ruleForm.type,callback:function(r){e.$set(e.ruleForm,"type",r)},expression:"ruleForm.type"}},[t("el-option",{attrs:{label:"投币器",value:"coin"}})],1)],1),e._v(" "),t("el-form-item",[t("div",{staticClass:"search-btn-wrap"},[t("el-button",{staticClass:"search-btn ",attrs:{size:"small",type:"success"},on:{click:function(r){e.Save("ruleForm")}}},[e._v("\n                                    确认\n                                ")])],1)])],1)],1)])],1),e._v(" "),t("el-dialog",{attrs:{title:"添加套餐"},model:{value:e.dialogFormVisible,callback:function(r){e.dialogFormVisible=r},expression:"dialogFormVisible"}},[t("el-form",{ref:"combo",staticClass:"demo-ruleForm",attrs:{model:e.combo,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"套餐标题：",prop:"title"}},[t("el-input",{model:{value:e.combo.title,callback:function(r){e.$set(e.combo,"title",r)},expression:"combo.title"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"付款金额：",prop:"money"}},[t("el-input",{model:{value:e.combo.money,callback:function(r){e.$set(e.combo,"money",r)},expression:"combo.money"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"出币数：",prop:"pulse"}},[t("el-input",{model:{value:e.combo.pulse,callback:function(r){e.$set(e.combo,"pulse",r)},expression:"combo.pulse"}})],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(r){e.sendDate("combo")}}},[e._v("保存")])],1)],1)],1)],1)])},staticRenderFns:[]}}});