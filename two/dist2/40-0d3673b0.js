webpackJsonp([40],{285:function(t,e,n){var a=n(14)(n(752),n(814),null,null);t.exports=a.exports},708:function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.virtualExcel=e.QrCreated=e.GetvirtualList=void 0;var r=n(151),i=a(r),s=n(75),o=(a(s),n(98)),l=(a(o),n(152)),c=a(l);a((a(n(153)),n(97))),e.GetvirtualList=function(t,e){return i.default.Post(c.default.operation.virtualList,t,e)},e.QrCreated=function(t){return i.default.Post(c.default.operation.qrCreated,{sn:t.sn})},e.virtualExcel=function(t){return i.default.Post(c.default.operation.virtualExcel,t)}},752:function(t,e,n){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function a(r,i){try{var s=e[r](i),o=s.value}catch(t){return void n(t)}if(!s.done)return Promise.resolve(o).then(function(t){a("next",t)},function(t){a("throw",t)});t(o)}return a("next")})}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(151),s=a(i),o=n(152),l=a(o),c=n(708);e.default={data:function(){return{templateList:[],formInline:{sn:"",number:""},drawalsList:[],page_number:1,per_page:10,per_page_code:10,count:0,calculation:!1,calcObj:{points:0}}},methods:{calculaOn:function(){if(this.calculation=!this.calculation,this.calculation){this.calcObj.points=0;var t=0;this.drawalsList.forEach(function(e){t+=parseInt(e.points)}),this.calcObj.points=parseInt(t)}},handleCurrentChange:function(t){this.page_number=t,this.getData()},topSplit:function(t){var e=this;return r(regeneratorRuntime.mark(function n(){var a,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t){n.next=3;break}return e.$notify({title:"温馨提示",message:"请输入上分设备编号!",type:"info"}),n.abrupt("return");case 3:return a="",t&&(a=t),n.prev=5,n.next=8,s.default.Post(l.default.device.topSplit,{device_sn:a,coin_num:e.formInline.number});case 8:r=n.sent,e.$notify({title:"温馨提示",message:r,type:"success"}),n.next=15;break;case 12:n.prev=12,n.t0=n.catch(5),console.log("远程上分失败");case 15:case"end":return n.stop()}},n,e,[[5,12]])}))()},tableExport:function(){var t=this;return r(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,c.virtualExcel)();case 3:n=t.sent,window.location.href=n.url,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Ajax Error");case 10:case"end":return t.stop()}},e,t,[[0,7]])}))()},getData:function(){var t=this;return r(regeneratorRuntime.mark(function e(){var n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.calculation=!1,e.next=3,(0,c.GetvirtualList)({per_page:t.per_page,page_number:t.page_number});case 3:n=e.sent,a=new Map,a.set("coinV2","投币器"),a.set("ssd_device","第三代云投币器"),a.set("password","密码键盘"),a.set("power_bank","计时板"),t.drawalsList=n.list,t.count=n.count,t.per_page_code=parseInt(t.per_page);case 12:case"end":return e.stop()}},e,t)}))()},changePageNum:function(){this.per_page!=this.per_page_code&&(""!=this.per_page&&0!=this.per_page||(this.per_page=1),this.getData())}},watch:{per_page:function(){1!=this.per_page&&(this.per_page=this.per_page.replace(/[^0-9]/g,""))}},created:function(){this.$store.commit("checkOperationInfo","onnumber"),this.getData()},activated:function(){this.$store.commit("checkOperationInfo","onnumber"),this.getData()},deactivated:function(){}}},814:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main-template"},[n("div",{staticClass:"operation-temple",staticStyle:{"padding-bottom":"30px"}},[n("div",{staticClass:"location-template noneBottomLink"},[n("el-row",[n("el-col",[n("el-breadcrumb",{attrs:{separator:"/"}},[n("el-breadcrumb-item",[t._v("\n                            设备上分\n                        ")])],1)],1)],1)],1),t._v(" "),n("div",{staticClass:"operation-box-qrcode"},[n("el-form",{staticClass:"demo-form-inline",attrs:{model:t.formInline,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"设备编号:"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"设备编号"},model:{value:t.formInline.sn,callback:function(e){t.$set(t.formInline,"sn",e)},expression:"formInline.sn"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"上分数量:"}},[n("el-input",{staticStyle:{width:"300px"},attrs:{placeholder:"上分数量"},model:{value:t.formInline.number,callback:function(e){t.$set(t.formInline,"number",e)},expression:"formInline.number"}})],1),t._v(" "),n("div",{staticClass:"form-sub",staticStyle:{"margin-left":"100px"}},[n("el-button",{staticClass:"light_button",staticStyle:{"background-color":"#2abb9c",color:"#fff","padding-top":"6px","padding-bottom":"6px",border:"none"},on:{click:function(e){t.topSplit(t.formInline.sn)}}},[t._v("确认")])],1)],1)],1)]),t._v(" "),n("div",{staticClass:"notify-excel"},[n("div",{staticClass:"location-template noneBottomLink"},[n("el-row",[n("el-col",[n("el-breadcrumb",{attrs:{separator:"/"}},[n("el-breadcrumb-item",[t._v("\n                            上分记录\n                        ")])],1)],1)],1)],1),t._v(" "),n("div",{staticClass:"table-template"},[n("el-table",{attrs:{"min-height":"300",data:t.drawalsList,align:"center"}},[n("el-table-column",{attrs:{type:"index",width:"100",align:"center",label:"编号"}}),t._v(" "),n("el-table-column",{attrs:{prop:"create_at",align:"center",label:"上分时间",width:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"device_sn",align:"center",label:"设备编号",width:""}}),t._v(" "),n("el-table-column",{attrs:{prop:"points",label:"上分数量",align:"center",width:""}})],1),t._v(" "),n("div",{staticClass:"jump-ability clearfixed"},[n("div",{staticClass:"jump-btn",class:{"jump-none":0==t.drawalsList.length}},[n("span",{staticClass:"jump-text jump-bg1",class:{"jump-bg2":t.calculation},attrs:{unselectable:"on"},on:{click:function(e){e.preventDefault(),t.calculaOn()}}},[t._v("统计查询结果")]),t._v(" "),n("span",{class:{"jump-none":t.calculation}},[t._v("|")]),t._v(" "),n("span",{staticClass:"jump-text",on:{click:function(e){t.tableExport()}}},[t._v("下载查询结果")])]),t._v(" "),n("div",{staticClass:"page-change"},[n("div",{staticClass:"block pagination-template"},[n("el-pagination",{attrs:{layout:"prev, pager, next,jumper",total:t.count,"page-size":t.per_page_code,small:""},on:{"current-change":t.handleCurrentChange}})],1)]),t._v(" "),n("div",{staticClass:"page-number"},[t._v("每页显示\n                    "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.per_page,expression:"per_page"}],domProps:{value:t.per_page},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.changePageNum()},blur:function(e){t.changePageNum()},input:function(e){e.target.composing||(t.per_page=e.target.value)}}}),t._v("\n                    条\n                ")]),t._v(" "),n("div",{staticClass:"countNumber",staticStyle:{float:"right"}},[t._v("共"+t._s(t.count)+"条列表项")])]),t._v(" "),n("div",{staticClass:"calculateBox",class:{disNone:!t.calculation}},[t._v("\n                上分总数： "+t._s(t.calcObj.points)+" \n            ")])],1)])])},staticRenderFns:[]}}});