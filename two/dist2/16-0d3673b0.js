webpackJsonp([16],{266:function(e,t,r){var i=r(14)(r(731),r(812),null,null);e.exports=i.exports},694:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={quicksort:function(e,t,r){if(t<r){for(var i=e[t],a=t,s=r;a<s;){for(;a<s&&e[s]>=i;)s--;for(e[a]=e[s];a<s&&e[a]<=i;)a++;e[s]=e[a]}e[a]=i,this.quicksort(e,t,a-1),this.quicksort(e,a+1,r)}},deepCopy:function(e){if(e instanceof Array){for(var t=[],r=0;r<e.length;++r)t[r]=this.deepCopy(e[r]);return t}if(e instanceof Object){var t={};for(var r in e)t[r]=this.deepCopy(e[r]);return t}return e}}},697:function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.DeleteComboList=t.GetComboSetList=t.TemplateComboAdd=t.DeviceComboAdd=t.DeviceComboDelete=t.GetDeviceComboList=t.templateAdd=t.templateEdit=t.getTemplateDetail=t.templateRemove=t.templateRemoves=t.getDeviceComboList=t.PostAddressList=t.GetAddressList=t.updateDeviceAddress=t.DeleteAddressList=t.AddAddressData=t.RemoveBindDevice=t.updateDeviceTtemplate=t.getTemplateList=t.ChangeDevideStatus=t.AddDevice=t.EditDevice=t.lockDevice=t.PointsDevice=t.getDeviceDetail=t.GetDeviceList=void 0;var a=r(151),s=i(a),n=r(75),o=(i(n),r(98)),d=(i(o),r(152)),l=i(d),u=r(153),c=(i(u),r(97)),f=(i(c),function(e){var t="";for(var r in e)t+=r+"="+e[r]+"&";return"?"+t.substr(0,t.length-1)});t.GetDeviceList=function(e,t){return s.default.Get(l.default.device.list+f(e),t)},t.getDeviceDetail=function(e,t){return s.default.Get(l.default.device.details+f(e),t)},t.PointsDevice=function(e){return s.default.Post(l.default.device.topSplit,{device_id:e.device_id,device_sn:e.device_sn,coin_num:e.coin_num})},t.lockDevice=function(e){return s.default.Post(l.default.device.lockDevice,{device_id:e.device_id})},t.EditDevice=function(e){return s.default.Post(l.default.device.edit,e)},t.AddDevice=function(e){return s.default.Post(l.default.device.join,e)},t.ChangeDevideStatus=function(e){return s.default.Post(l.default.device.deviceStatus,{device_id:e.device_id,status:e.status})},t.getTemplateList=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return s.default.Post(l.default.device.templateList,e,t)},t.updateDeviceTtemplate=function(e){return s.default.Post(l.default.device.updateDeviceTtemplate,{ids:e.ids,device:e.device,toall:e.toall})},t.RemoveBindDevice=function(e){return s.default.Post(l.default.device.removeBind,{device_id:params.device_id})},t.AddAddressData=function(e){return s.default.Get(l.default.device.add+f(e))},t.DeleteAddressList=function(e){return s.default.Post(l.default.personal.del,{aId:e.aId})},t.updateDeviceAddress=function(e){return s.default.Post(l.default.personal.updateDeveceAddress,{id:e.id,province:e.province,city:e.city,county:e.county,addressType:e.addressType,latitude:e.latitude,longitude:e.longitude,address:e.address})},t.GetAddressList=function(e){var t="";for(var r in e)t+=r+"="+e[r]+"&";return s.default.Get(l.default.personal.list+"?"+t.substr(0,t.length-1))},t.PostAddressList=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return s.default.Post(l.default.personal.list,e,t)},t.getDeviceComboList=function(e,t){return s.default.Post(l.default.device.getTemplateFile,e,t)},t.templateRemoves=function(e){return s.default.Post(l.default.device.templateRemoves,{ids:e.ids})},t.templateRemove=function(e){return s.default.Post(l.default.device.templateRemove,{ids:e.ids})},t.getTemplateDetail=function(e,t){return s.default.Get(l.default.device.getTemplateDetail+f(e),t)},t.templateEdit=function(e){return s.default.Post(l.default.device.templateEdit,{name:e.name,id:e.id?e.id:"",default_pay:e.default_pay,alias:e.alias,address_id:e.address_id,combo_type:e.combo_type})},t.templateAdd=function(e){return s.default.Post(l.default.device.templateAdd,{name:e.name,id:e.id?e.id:"",default_pay:e.default_pay,alias:e.alias,address_id:e.address_id,combo_type:e.combo_type})},t.GetDeviceComboList=function(e){return s.default.Post(l.default.device.combo,{device_id:e.device_id})},t.DeviceComboDelete=function(e){return s.default.Post(l.default.device.deviceOneDelete,{id:e.id})},t.DeviceComboAdd=function(e){return s.default.Post(l.default.device.deviceOneAdd,{title:e.title,money:e.money,pulse:e.pulse,id:e.id})},t.TemplateComboAdd=function(e){return s.default.Post(l.default.device.templateComboAdd,{title:e.title,money:e.money,pulse:e.pulse,id:e.id})},t.GetComboSetList=function(e){return s.default.Post(l.default.device.getComboSetList,e)},t.DeleteComboList=function(e){return s.default.Post(l.default.device.deleteComboList,e)}},698:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={ToBase64:function(e){return new Promise(function(t,r){var i=new FileReader;i.readAsDataURL(e),i.onload=function(e){t(this.result)}})}}},731:function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function i(a,s){try{var n=t[a](s),o=n.value}catch(e){return void r(e)}if(!n.done)return Promise.resolve(o).then(function(e){i("next",e)},function(e){i("throw",e)});e(o)}return i("next")})}}Object.defineProperty(t,"__esModule",{value:!0});var s=r(151),n=i(s),o=r(694),d=i(o),l=r(698),u=(i(l),r(152)),c=i(u),f=r(775),m=i(f),p=r(697);t.default={data:function(){return{deviceTypes:m.default,queryID:"",addressList:[],ruleForm:{alias:"",template_file:"",sn:"",address_id:"",password:"",status:"",wrong:"",inline:"",id:"",combo_type:""},address_name:"",rules:{sn:[{required:!0,message:"请输入设备编号",trigger:"blur"},{min:6,message:"设备编号最小不能小于6位",trigger:"blur"}],password:[{required:!0,message:"请输入用户密码",trigger:"blur"},{min:3,message:"最小不能小于3个字符",trigger:"blur"}],alias:{required:!0,message:"请输入内容",trigger:"blur"},address_id:{required:!0,message:"请选择投放地址"},combo_type:{required:!0,message:"请选择套餐模式"}},dialogFormVisible:!1,dialogModel:!1,formLabelWidth:"120px"}},computed:{pageMode:function(){return!!this.queryID&&(this.rules.sn=[],!0)}},methods:{querySearch:function(e,t){var r=this.addressList;t(e?r.filter(this.createFilter(e)):r)},createFilter:function(e){return function(t){return-1!=t.value.toLowerCase().indexOf(e.toLowerCase())}},handleSelectCb:function(e){this.ruleForm.address_id=e.id},handleIconClick:function(){this.ruleForm.address_id="",this.address_name=""},resetForm:function(e){this.$refs[e].resetFields()},Save:function(e){var t=this,r=this;this.$refs[e].validate(function(){var e=a(regeneratorRuntime.mark(function e(i){var a,s,n,o,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i){e.next=3;break}return console.log("error submit!!"),e.abrupt("return",!1);case 3:if(a=d.default.deepCopy(t.ruleForm),s=t.ruleForm,e.prev=5,!t.queryID){e.next=14;break}return a.id=t.queryID,e.next=10,(0,p.EditDevice)(a);case 10:n=e.sent,t.$notify({title:"请求提示",message:"修改成功",type:"success"}),e.next=18;break;case 14:return e.next=16,AddDevice(a);case 16:o=e.sent,t.$notify({title:"请求提示",message:"新增成功",type:"success"});case 18:l=setTimeout(function(){clearTimeout(l),r.$router.push("/device/info/list")},1e3),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(5),console.info(e.t0);case 24:case"end":return e.stop()}},e,t,[[5,21]])}));return function(t){return e.apply(this,arguments)}}())},getData:function(){var e=this;return a(regeneratorRuntime.mark(function t(){var r,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.queryID=e.$route.params.id,t.next=3,(0,p.getDeviceDetail)({id:e.queryID},!1);case 3:for(r=t.sent,console.info(r),i=0;i<r.length;i++)r[i].combo_type=1==r[i].combo_type?"常规模式":"六宫格";return e.ruleForm=r,t.next=9,n.default.Post(c.default.personal.list,{mode:2});case 9:a=t.sent,a.data.forEach(function(t,r){t.value=t.address,t.id==e.ruleForm.address_id&&(e.address_name=t.address)}),e.addressList=a.data;case 12:case"end":return t.stop()}},t,e)}))()}},watch:{address_name:function(){""==this.address_name&&(this.ruleForm.address_id="")}},created:function(){var e=this;return a(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:console.info(e.deviceTypes),e.$store.commit("checkDevice","device_edit"),e.getData();case 3:case"end":return t.stop()}},t,e)}))()}}},775:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=[{name:"投币器/计时板",value:"coin"},{name:"投币器二代",value:"coinV2"},{name:"计时板二代",value:"power_bank"}]},812:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main-template"},[r("div",{staticClass:"location-template noneBottomLink"},[r("el-row",[r("el-col",[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",[e._v("\n                        基础详情\n                    ")])],1)],1)],1)],1),e._v(" "),r("el-row",{staticStyle:{"margin-top":"20px","box-shadow":"2px 0 2px #eee, 0px 2px 2px #eee, -2px 0px 2px #eee, 0px -2px 2px #eee","padding-top":"20px"},attrs:{gutter:10}},[r("el-col",{attrs:{lg:{span:14,offset:3},md:{span:16,offset:4},sm:{span:18,offset:3},xs:{span:20,offset:2}}},[r("div",{staticClass:"grid-content bg-purple-dark"},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"150px"}},[r("el-form-item",{attrs:{label:"编号：",prop:"sn"}},[r("el-input",{attrs:{disabled:e.pageMode,placeholder:"请输入设备编号"},model:{value:e.ruleForm.sn,callback:function(t){e.$set(e.ruleForm,"sn",t)},expression:"ruleForm.sn"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"别名：",prop:"alias"}},[r("el-input",{attrs:{placeholder:"请输入别名"},model:{value:e.ruleForm.alias,callback:function(t){e.$set(e.ruleForm,"alias",t)},expression:"ruleForm.alias"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"套餐模板：",prop:"combo_type"}},[r("el-select",{attrs:{placeholder:"请选择套餐模板"},model:{value:e.ruleForm.combo_type,callback:function(t){e.$set(e.ruleForm,"combo_type",t)},expression:"ruleForm.combo_type"}},[r("el-option",{attrs:{label:"常规模式",value:"1"}}),e._v(" "),r("el-option",{attrs:{label:"六宫格",value:"2"}})],1)],1),e._v(" "),e.pageMode?e._e():r("el-form-item",{attrs:{label:"密码：",prop:"password"}},[r("el-input",{attrs:{placeholder:"请输入密码",type:"password"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),e._v(" "),r("el-form-item",{staticClass:"Posrelative",attrs:{label:"投放地址选择：",prop:"address_id"}},[r("el-autocomplete",{staticClass:"inline-input width100",attrs:{"suffix-icon":"el-icon-date","fetch-suggestions":e.querySearch,placeholder:"请选择场地地址"},on:{select:e.handleSelectCb},model:{value:e.address_name,callback:function(t){e.address_name=t},expression:"address_name"}}),e._v(" "),r("div",{staticClass:"icon-delete-cb",on:{click:function(t){e.handleIconClick()}}})],1),e._v(" "),r("el-form-item",[r("div",{staticClass:"search-btn-wrap"},[r("el-button",{staticClass:"search-btn ",attrs:{size:"small",type:"success"},on:{click:function(t){e.Save("ruleForm")}}},[e._v("\n                                确认\n                            ")])],1)])],1)],1)])],1)],1)},staticRenderFns:[]}}});